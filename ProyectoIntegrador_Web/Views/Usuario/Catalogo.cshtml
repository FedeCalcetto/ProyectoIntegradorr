@model ProyectoIntegrador.LogicaAplication.Dtos.CatalogoDto

@{
    ViewData["Title"] = "Catálogo";
}


<h4 class="mb-3 text-center">Catálogo de productos</h4>


        <!-- BARRA PRINCIPAL -->
        <div class="w-100 mb-2">
            <partial name="_BarraBusquedaToggle" />
        </div>


<!-- CONTENIDO DEL CATÁLOGO -->
<div class="container py-4">

    <!-- AGREGADOS RECIENTEMENTE -->
    <h4 class="mb-3">Agregados recientemente</h4>

    <div class="slider-container">
        <button class="slider-btn left" onclick="mover(this, -1)">‹</button>

        <div class="slider">
            @foreach (var producto in Model.Recientes)
            {
                <div class="slider-item">
                    <a asp-controller="Producto"
                       asp-action="DetallesProducto"
                       asp-route-id="@producto.Id"
                       class="text-decoration-none text-dark">

                        <partial name="_ProductoCard" model="producto" />
                    </a>
                </div>
            }
        </div>

        <button class="slider-btn right" onclick="mover(this, 1)">›</button>
    </div>

    <!-- POR SUBCATEGORÍA -->
    @foreach (var categoria in Model.PorCategoria)
    {
        <div class="catalog-section">

            <h4 class="mb-3">@categoria.Nombre</h4>

            <div class="slider-container">
                <button class="slider-btn left" onclick="mover(this, -1)">‹</button>

                <div class="slider">
                    @foreach (var producto in categoria.Productos)
                    {
                        <div class="slider-item">
                            <partial name="_ProductoCard" model="producto" />
                        </div>
                    }
                </div>

                <button class="slider-btn right" onclick="mover(this, 1)">›</button>
            </div>

        </div>
    }
</div>

<script>
    function mover(boton, direccion) {
        const slider = boton.parentElement.querySelector('.slider');
        const anchoCard = slider.querySelector('.slider-item').offsetWidth + 16;
        slider.scrollLeft += direccion * anchoCard * 2;
    }
</script>