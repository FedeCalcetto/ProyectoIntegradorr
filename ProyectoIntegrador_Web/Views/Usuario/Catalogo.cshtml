@model ProyectoIntegrador_Web.Models.CatalogoViewModel


@{
    ViewData["Title"] = "Catálogo";
}

<h4 class="mb-3 text-center">Catálogo de productos</h4>

<!-- 🔍 BARRA DE BÚSQUEDA REUTILIZABLE -->
<div class="w-100 mb-2">
    <partial name="_Buscador"
             model="Model.Buscador" />
</div>

<!-- CONTENIDO DEL CATÁLOGO -->
<div class="container py-4">

    <!-- AGREGADOS RECIENTEMENTE -->
    <h4 class="mb-3">Agregados recientemente</h4>

    <div class="slider-container">
        <button class="slider-btn left" onclick="mover(this, -1)">‹</button>

        <div class="slider">
            @foreach (var producto in Model.Catalogo.Recientes)
            {
                <div class="slider-item">
                    <a asp-controller="Producto"
                       asp-action="DetallesProducto"
                       asp-route-id="@producto.Id"
                       class="text-decoration-none text-dark">

                        <partial name="_ProductoCard" model="producto" />
                    </a>
                </div>
            }
        </div>

        <button class="slider-btn right" onclick="mover(this, 1)">›</button>
    </div>


   

    <!-- POR CATEGORÍA -->
    @foreach (var categoria in Model.Catalogo.PorCategoria)
    {
        <div class="catalog-section">

            <h4 class="mb-3">@categoria.Nombre</h4>

            <div class="slider-container">
                <button class="slider-btn left" onclick="mover(this, -1)">‹</button>

                <div class="slider">
                    @foreach (var producto in categoria.Productos)
                    {
                        <div class="slider-item">
                            <partial name="_ProductoCard" model="producto" />
                        </div>
                    }
                </div>

                <button class="slider-btn right" onclick="mover(this, 1)">›</button>
            </div>

        </div>
    }
</div>

<button id="btnSubir" class="btn btn-outline-dark btn-subir">
    ⬆
</button>

<script>
    function mover(boton, direccion) {
        const slider = boton.parentElement.querySelector('.slider');
        const anchoCard = slider.querySelector('.slider-item').offsetWidth + 16;
        slider.scrollLeft += direccion * anchoCard * 2;
    }
</script>



<!-- esto se encarga que al darle click suba -->
<script>
    const botonSubir = document.getElementById("btnSubir");

    botonSubir.onclick = () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    };

    // esto detecta cuando se escrolleo mas de 200 en valor y muestra el boton
    window.addEventListener("scroll", () => {
        botonSubir.style.display = window.scrollY > 200 ? "block" : "none";
    });
</script>